\chapter{Implementation}
\label{chap:implementation}

%TODO a whole lot
TODO: a whole lot.

\section{Tools and Environment}

TODO

\subsection{Tox}
\label{sub:Tox}

I think I will be using this binding for Tox: \url{https://github.com/codedust/go-tox}.
Note: not sure if he has implemented file transfers yet, which I definitely require!
Although I can get started without them for validating the protocol.

\section{Tinzenite Library}

TODO: on the topic of salted hashes: note where the salt is stored etc.

%TODO
TODO: on receiving an update: queue in connection specific command queue (one per connection because only one OP per connection) (update / redo existing fetch if applicable != FIFO); fetch first file in queue.
Then wait a bit (?) before propagating update yourself (decouple receive and send time frames?). <-- Isn't this implementation details?

TODO: add capability for delta updates... if possible. :P
Delta is difficult because we must effectively track parts of files instead of complete files... how to do this?
use librsync! <-- Really good and easy to use, will save a ton of work!

TODO: Also remember that multiple file transfers might be a problem.
Do we limit the connection to one transfer at a time or can we fetch everything at once?

TODO: I need to put some thought into avoiding a conflict between the disk watcher and when Tinzenite updates the objects... :P

TODO: Another feature that might be viable to implemented as an advanced feature is the capability of easily comparing peer IDs via pretty hashes or so.
Since these would be required to be the same on both ends these should probably also be supported by the core library.

TODO: the library should accept a path as a context.
Thus the quick switching between multiple directories can allow the single library to serve multiple directories.
In the case of the server n libraries can thus be mapped to m directories.
Should make sure that we can support encrypted and trusted peers side by side too (depending on whether the directory is clear or not).

\section{Client Peer}

TODO

\section{Server Peer}

TODO
Features: data obfuscation how?
Still required?

Also note that encrypted peer may want to have capability of detecting when data is infused via third channel but is valid (meaning for example someone manually moves a large file over to save time: peer should detect on model update that it already has file and doesn't request this).

\section{Mobile Peer}

TODO
